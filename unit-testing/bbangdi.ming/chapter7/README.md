가치 있는 단위 테스트를 위한 리팩터링
- 코드 복잡도는 코드에서 의사 결정 지점 수에 따라 명시적으로 그리고 암시적(코드가 사용하는 라이브러리)으로 정의된다.
- 도메인 유의성은 프로젝트의 문제 도메인에 대해 코드가 얼마나 중요한지를 보여준다. 복잡한 코드는 종종 도메인 유의성이 높고 그 반대의 경우도 있지만, 모든 경우에 100% 해당하지는 않는다.
- 복잡한 코드와 도메인 유의성을 갖는 코드는 해당 테스트의 회귀 방지가 뛰어나기 때문에 단위 테스트에서 가장 이롭다.
- 협력자가 많은 코드를 다루는 단위 테스트는 유지비가 많이 든다.
- 모든 제품 코드는 복잡도 또는 도메인 유의성과 협력자 수에 따라 네 가지 유형의 코드로 분류할 수 있다.
  - 도메인 모델 및 알고리즘은 단위 테스트에 대한 노력 대비 가장 높은 가치를 제공한다.
  - 간단한 코드는 테스트할 가치가 없음
  - 컨트롤러는 통합테스트를 통해 간단히 테스트해야한다
  - 지나치게 복잡한 코드는 컨트롤러와 복잡한 코드로 분할해야 한다.
- 코드가 중요하거나 복잡할수록 협력자가 적어야한다.
- 비즈니스 로직과 오케스트레이션을 분리한 때는 다음과 같이 세 사지 중요한 특징이 있다.
  - 도메인 모델 테스트 유의성
  - 컨트롤러 단순성
  - 성능
- 의사 결정 프로세스 단계를 더 세분화하는 것이 장단점을 고려할 때 가장 효과적인 절충이다. 다음 두가 지 패턴을 사용해 컨트롤러 복잡도 증가를 완화할 수 있다.
  - CanExecute/Execute 패턴
  - 도메인 이벤트
